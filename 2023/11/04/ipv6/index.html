<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>ryz | ryz</title><meta name="keywords" content="ICT"><meta name="author" content="ryz"><meta name="copyright" content="ryz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ryz"><meta name="application-name" content="ryz"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="ryz"><meta property="og:url" content="http://ybjryz.github.io/2023/11/04/ipv6/index.html"><meta property="og:site_name" content="ryz"><meta property="og:description" content="IPV6  PPT–网络系统建设与运维中级 1.ipv6引入1.1  1.2 ipv4 局限性 地址不足  互联网骨干路由器路由表非常庞大   1.3 ipv6の崛起 地址空间巨大  层次化的路由设计 ​	ANSI分配给五大洲的地区管理机构–机构分配个厂商  效率高，扩展灵活  支持即插即用（ICM"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://ybjryz.github.io/img/tx.png"><meta property="article:author" content="ryz"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://ybjryz.github.io/img/tx.png"><meta name="description" content="IPV6  PPT–网络系统建设与运维中级 1.ipv6引入1.1  1.2 ipv4 局限性 地址不足  互联网骨干路由器路由表非常庞大   1.3 ipv6の崛起 地址空间巨大  层次化的路由设计 ​	ANSI分配给五大洲的地区管理机构–机构分配个厂商  效率高，扩展灵活  支持即插即用（ICM"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://ybjryz.github.io/2023/11/04/ipv6/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":""},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: ryz","link":"链接: ","source":"来源: ryz","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'ryz',
  title: 'ryz',
  postAI: '',
  pageFillDescription: 'IPV6, 1.ipv6引入, 1.1, 1.2 ipv4 局限性, 1.3 ipv6の崛起, 1.4 门禁锁连wifi, 2.IPv6与IPv4对比, 2.1 IPv6数据报封装, 3.IPv6基础！, 3.1 IPV6数据包封装, 3.2 实验–ping观察ipv6报头, 3.2.1 配置接口ip, 3.3 ping观察报头, 3.3.1 ping基础包, 3.3.2 分片, 3.3.2.1 分片的基本概念, 3.3.2.2 抓包分析, 3.4 常见上层协议及对应的Next Header值, 3.5 IPv6 表示方式, 1、前导0可省略, 2、1个或多个0组成的地址块可用取代, , 3.6 IPV6的单播组播广播, 3.6.1 IPV6地址结构, 3.6.2 IPV4的单播组播广播, 3.6.3IPV6的单播, 3.6.3.1 链路本地地址–link-local, 3.6.3.2 唯一本地地址–组建私网使用, 3.6.3.3 全球单播地址, 3.6.4 IPV4组播, 3.6.4.1 保留的永久组播地址, 3.6.4.2 用于在互联网上组播地址, 3.6.5 IPV6组播, 3.6.5.1 IPV6固定组播地址, 3.6.5.2 特殊地址, , 3.6.6 IPV6任播, 4.IPV6路由基础, 4.1.1 IPV6静态路由配置, 4.1.2 路由协议配置, 4.1.2.1 OSPF协议配置–OSPFv3, 4.1.2.2 RIP协议配置–RIPNG, 4.1.3 IPV6 地址自动配置, 4.1.3.1 无状态自动配置, 4.1.3.2 ICMPv6报文(未完结), 4.1.3.3 DHCP配置, 4.ADD, 4.1 单接口下配置多个ip网络系统建设与运维中级引入局限性地址不足互联网骨干路由器路由表非常庞大崛起地址空间巨大层次化的路由设计分配给五大洲的地区管理机构机构分配个厂商效率高扩展灵活支持即插即用集成了等功能更好的安全性保障引入了流标签的概念门禁锁连连学校需要账号密码劫持验证不要密码劫持数据库爆出了一堆与对比数据报封装相对于报头变简单并不是验证变弱了而是供需而用好比下雨天才带雨伞基础数据包封装基本报头字段解释指定数值为用来区分不同类型或优先级的数据包用作标识同一个数据流为新增字段数据包的有效载荷指明跟在基本报头后面是哪种扩展报头或者上层协议中的协议类型数据包的源地址必须是单播地址数据包的目标地址可以是单播或组播地址实验观察报头实验拓扑配置接口全局模式启动观察报头基础包可以看到包还有邻居建立的功能这里的和其实是包的替代下面观察包的报头分片分片的基本概念一个链路层数据报能承载的最大数据量称为最大传送单元因为数据报头被封装在链路层数据报中故链路层的严格地限制着数据报的长度而且在数据报的源与目的地路径上的各段链路可能使用不同的链路层协议有不同的例如以太网的为字节而许多广域网的不超过字节当数据报的总长度大于链路时就需要将数据报中的数据分装在两个或更多个较小的数据报中这些较小的数据报叫做片分片偏移片段偏移字段以字节块为单位进行测量它是位长并指定特定相对于原始未分段的数据报的开始的片段的偏移量零第一片段已偏移这允许最多偏移次方字节这将超过字节的最大报文长度与包括报头长度字节一般来说我们都知道是字节因此超过字节的数据就需要进行分片分片由头部中的标识分片偏移和更多分片字段控制分片的标识都是同样的而且分片偏移是以字节为单位的偏移分片源和目的端口号的协议头部只出现在第一个分片里重组分片在目的地的网络层被重新组装目的主机使用首部中的标识标志和片偏移字段来完成对片的重组同样的标识和不同的偏移让接收方可以对分片进行重组当的分片被接收到时重组程序才能确定原始数据报的长度标识当创建一个数据报时源主机为该数据报加上一个标识号当一个路由器需要将一个数据报分片时形成的每个数据报即片都具有相同的原始数据报的标识号当目的主机收到来自同一发送主机的一批数据报时它可以通过检查数据报的标识号以确定哪些数据报是属于同一个原始数据报的片更多分片首部中的标志位有个比特但只有后个比特有意义分别是位和位标志指明该数据报后面是否还有更多的分组只有当时该数据报才可以被分片则用来告知目的主机该数据报是否为原始数据报的最后一个片当时表示相应的原始数据报还有后续的片当时表示该数据报是相应原始数据报的最后一个片目的主机在对片进行重组时使用片偏移字段来确定片应放在原始数据报的哪个位置分片偏移偏移量是用来记录每个分片所在的位置偏移量相对分片报文长度假设一共传输字节为字节由于固定首部为字节因此实际传输长度为字节所以只需要传输三次那么第一片偏移为第二片偏移第三次偏移分片偏移量计算例考虑向一条具有字节的的链路发送一个字节的数据报首部字节数据部分字节假定初始化数据报具有序列号这将会生成多少个片它们的特征是什么答因为数据报首部占字节因此在每个分片中片的大小是个字节故原始数据报中字节数据必须被分配到个片中所以字节数据必须被分配到个独立的片中每个片也是一一个数据报由于偏移值的单位是字节所以除了最后一个片外其他所有片中的有效数据载荷都是的倍数每个片的标识号都为前个片的还有分片最后一个片的表示最后一个分片的分片报文可参考指定数据包大小控制包大小为抓包分析下对的报文进行分析先发送两个没有报头的包其中包含报头这是第一个片观察他的报头可以看到他的字段是片的标识关注字段可以看到偏移量为为用于数据包重组下图分别是第二个数据包和第三个数据包常见上层协议及对应的值表示方式地址共位位若以进制表示前导可省略个或多个组成的地址块可用取代注意整个地址中只能出现一次的单播组播广播一般用位做终端因为后位会根据地址去做填充地址结构的地址的结构为网络前缀接口网络前缀相当于中的网络位接口相当于中的主机位中较常用的网络大小是位前缀长度的网络的单播组播广播与类似也存在某一地址为单播组播等概念在中类是单播地址只有这三类地址才能分配给主机接口使用类属于组播地址类地址专门用于特殊的实验目的的单播单播地址表示唯一标识一个接口类似于的单播地址发送到单播地址的数据包将被传输到此地址所标识的唯一接口一个单播地址只能标识一个接口但一个接口可以有多个单播地址单播地址可细分为以下几类链路本地地址前缀链路本地地址唯一本地地址唯一本地地址组建私网使用全球单播地址全球单播地址嵌入地址的地址链路本地地址链路本地地址只在同一链路上的节点之间有效在启动后就自动生成无需地址使用了特定的前缀接口使用自动生成也可以使用手动配置例使用将地址位为的主机的地址生成过程如下先将地址拆分为部分在地址的中间加上变成将第位求反计算得出的接口为唯一本地地址组建私网使用唯一本地地址是网络中可以自己随意使用的私有网络地址使用特定的前缀固定前缀全球唯一前缀通过伪随机方式产生工程师根据网络规划自定义的子网相当于中的主机位全球单播地址全球单播地址相当于中的公网地址日前已经分配出去的前位固定是所以已分配的地址范围是目前已分配的固定前缀为顶级聚合保留使用为未来扩充或者预留次级聚合站点级聚合组播也称为多播组播是一种允许一个或多个发送者组播源发送单一的数据包到多个接收者一次的同时的的网络技术点到多点应用譬如网络视频会议网络音频视频广播股市行情发布多媒体远程教育协同计算远程会诊网络游戏缓解带宽的急剧消耗和网络拥挤问题组播是基于的保留的永久组播地址属于局部链路组播地址范围所有主机所有组播路由器没有分配路由器指定路由器路由器路由器服务器中继代理所有的路由器协议无关组播用于在互联网上组播地址包含在用户组播地址范围内实际的可用于在互联网上组播地址是这个组播地址不属于任何服务器或个人它有点类似一个微信群号任何成员组播源往微信群组播发送消息组播数据这个群里的成员组播接收者都会接收到此消息运营商使用的组播地址是一种自治系统之间的组播地址分配机制将号直接填入组播地址的中间两个字节中每个自治系统都可以得到个组播地址组播在中不存在广播报文要通过组播来实现广播本身就是组播的一种应用组播地址标识一组接口目的地址是组播地址的数据包会被属于该组的所有接口所接收组播地址前位都是以开头第位都是格式标识传播范围组播组标识号固定组播地址特殊地址简化为未指定地址它不能分配给任何节点表示当前状态下没有地址如当设备刚接入网络后本身没有地址则发送数据包的源地址使用该地址比如发送消息重复地址检测该地址不能用作目的地址简化为环回地址节点用它作为发送后返回给自己的报文不能分配给任何物理接口相比的环回口地址直接分配一个地址段的环回口较为节省任播任播地址任播的概念最初是在中提出并定义的主要为和提供服务中没有为任播规定单独的地址空间任播地址和单播地址使用相同的地址空间任播地址可以同时被分配给多个设备也就是说多台设备可以有相同的任播地址以任播地址为目标的数据包会通过路由器的路由表被路由到离源设备最近的拥有该目标地址的设备若路由收到用户发来的任播数据包则会走服务器路由基础实验拓扑静态路由配置路由协议配置注意无论还是在中已经没有命令无法通过宣告网段的方式来让下一路由学习需进入所需配置的接口进行划分协议配置值得关注的是中的仍使用地址在中的选举规则如下优选手工配置的进程手工配置的具有最高优先级在全局模式下配置的公用的优先级仅次于直接给进程手工配置即它具有第二优先级在没有手工配置的前提下优选接口地址中最大的地址作为在没有配置接口地址的前提下优选其他接口的地址中选择最大的地址作为不考虑接口的状态因此在上述配置做完后会发现邻居关系无法建立熟悉的样子仍然是得配置啊在上做同样的配置需要注意如果环回口的地址是在开启后配置的则依然无法启动经过测试不配置就无法发送报文邻居建立过程与相同每隔发送报文然后发送比大小邻居关系已建立报文协议配置地址自动配置实验拓扑无状态自动配置在和上使能并让接口自动生成链路本地地址链路本地地址此时去通信为例需要指定端口不然会报错在的接口上配置全球单播地址在使能发布报文的功能逻辑上应该是抑制功能配置接口自动获取地址检查的可以看到已经学习到了的拥有与一样的位前缀接口结合其地址生成方式参照链路本地地址标准报文未完结由于时间原因该部分没有做详细介绍后续可参考实则是报文配置单接口下配置多个',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-24 11:31:06',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/tx.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">ryz</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">音乐</div><span class="author-content-item-title">灵魂的碰撞💥</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/ICT/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>ICT</span></a></span></div></div><h1 class="post-title" itemprop="name headline">无题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-11-04T06:31:18.000Z" title="发表于 2023-11-04 14:31:18">2023-11-04</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-11-24T03:31:06.757Z" title="更新于 2023-11-24 11:31:06">2023-11-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为重庆"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>重庆</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://ybjryz.github.io/2023/11/04/ipv6/"><header><a href="/tags/ICT/" tabindex="-1" itemprop="url">ICT</a><h1 id="CrawlerTitle" itemprop="name headline">无题</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">ryz</span><time itemprop="dateCreated datePublished" datetime="2023-11-04T06:31:18.000Z" title="发表于 2023-11-04 14:31:18">2023-11-04</time><time itemprop="dateCreated datePublished" datetime="2023-11-24T03:31:06.757Z" title="更新于 2023-11-24 11:31:06">2023-11-24</time></header><h1 id="IPV6"><a href="#IPV6" class="headerlink" title="IPV6"></a>IPV6</h1><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123021525893.png" class="" title="image-20231123021525893">

<p>PPT–网络系统建设与运维中级</p>
<h2 id="1-ipv6引入"><a href="#1-ipv6引入" class="headerlink" title="1.ipv6引入"></a>1.ipv6引入</h2><h3 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123022132189.png" class="" title="image-20231123022132189">

<h3 id="1-2-ipv4-局限性"><a href="#1-2-ipv4-局限性" class="headerlink" title="1.2 ipv4 局限性"></a>1.2 ipv4 局限性</h3><ol>
<li><p>地址不足</p>
</li>
<li><p>互联网骨干路由器路由表非常庞大</p>
</li>
</ol>
<h3 id="1-3-ipv6の崛起"><a href="#1-3-ipv6の崛起" class="headerlink" title="1.3 ipv6の崛起"></a>1.3 ipv6の崛起</h3><ol>
<li><p>地址空间巨大</p>
</li>
<li><p>层次化的路由设计</p>
<p>​	ANSI分配给五大洲的地区管理机构–机构分配个厂商</p>
</li>
<li><p>效率高，扩展灵活</p>
</li>
<li><p>支持即插即用（ICMP集成了DHCP等功能）</p>
</li>
<li><p>更好的安全性保障</p>
</li>
<li><p>引入了流标签的概念</p>
</li>
</ol>
<h3 id="1-4-门禁锁连wifi"><a href="#1-4-门禁锁连wifi" class="headerlink" title="1.4 门禁锁连wifi"></a>1.4 门禁锁连wifi</h3><p>连学校wifi 需要账号密码 http劫持 portal验证 </p>
<p>不要密码 mac劫持</p>
<p>数据库爆出了一堆key</p>
<h2 id="2-IPv6与IPv4对比"><a href="#2-IPv6与IPv4对比" class="headerlink" title="2.IPv6与IPv4对比"></a>2.IPv6与IPv4对比</h2><h3 id="2-1-IPv6数据报封装"><a href="#2-1-IPv6数据报封装" class="headerlink" title="2.1 IPv6数据报封装"></a>2.1 IPv6数据报封装</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123103050667.png" class="" title="image-20231123103050667">

<p>ipv6相对于ipv4 报头变简单 并不是验证变弱了 而是“供需而用”</p>
<p>好比下雨天才带雨伞</p>
<h2 id="3-IPv6基础！"><a href="#3-IPv6基础！" class="headerlink" title="3.IPv6基础！"></a>3.IPv6基础！</h2><h3 id="3-1-IPV6数据包封装"><a href="#3-1-IPV6数据包封装" class="headerlink" title="3.1 IPV6数据包封装"></a>3.1 IPV6数据包封装</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112142405605.png" class="" title="image-20231112142405605">

<p>IPV6基本报头字段解释：</p>
<pre class="language-none"><code class="language-none">Version:4bit,指定IPV6，数值为6											--（b）0110

Traffic Class:8bit,用来区分不同类型或优先级的IPv6数据包

Flow Label:20 bit,用作标识同一个数据流，为IPv6新增字段

Payload Length:数据包的有效载荷

Next Header：8bit，指明跟在基本报头后面是哪种扩展报头或者上层协议中的协议类型	    

Source Address：128bit，数据包的源IPv6地址，**必须是单播地址**

Destination Address：128bit，数据包的目标IPv6地址，**可以是单播或组播地址**</code></pre>





<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123113133210.png" class="" title="image-20231123113133210">

<h3 id="3-2-实验–ping观察ipv6报头"><a href="#3-2-实验–ping观察ipv6报头" class="headerlink" title="3.2 实验–ping观察ipv6报头"></a>3.2 实验–ping观察ipv6报头</h3><p>实验拓扑</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123104428784.png" class="" title="image-20231123104428784">

<h4 id="3-2-1-配置接口ip"><a href="#3-2-1-配置接口ip" class="headerlink" title="3.2.1 配置接口ip"></a>3.2.1 配置接口ip</h4><pre class="language-none"><code class="language-none">[R1]ipv6 enable 											#全局模式启动ipv6
[R1]inter g0&#x2F;0&#x2F;0
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 enable
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 add 2012::2 64

[R2]inter g0&#x2F;0&#x2F;0
[R2-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 enable
[R2-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 add 2012::2 64</code></pre>



<h3 id="3-3-ping观察报头"><a href="#3-3-ping观察报头" class="headerlink" title="3.3 ping观察报头"></a>3.3 ping观察报头</h3><h4 id="3-3-1-ping基础包"><a href="#3-3-1-ping基础包" class="headerlink" title="3.3.1 ping基础包"></a>3.3.1 ping基础包</h4><pre class="language-none"><code class="language-none">ping ipv6 2012::2														#ipv6--ping</code></pre>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123104808806.png" class="" title="image-20231123104808806">

<p>可以看到ICMP包还有邻居建立的 功能 </p>
<p>这里的NS和NA其实是arp包的替代</p>
<p>下面观察ICMP包的ipv6报头</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123104905461.png" class="" title="image-20231123104905461">

<h4 id="3-3-2-分片"><a href="#3-3-2-分片" class="headerlink" title="3.3.2 分片"></a>3.3.2 分片</h4><h5 id="3-3-2-1-分片的基本概念"><a href="#3-3-2-1-分片的基本概念" class="headerlink" title="3.3.2.1 分片的基本概念"></a>3.3.2.1 分片的基本概念</h5><p><strong>MTU</strong></p>
<p>一个链路层数据报能承载的最大数据量称为最大传送单元(MTU)。<br>因为IP数据报（IP头+DATA）被封装在链路层数据报中，故链路层的MTU严格地限制着IP数据报的长度，<br>而且在IP数据报的源与目的地路径上的各段链路可能使用不同的链路层协议，有不同的MTU.<br>例如，以太网的MTU为1500字节，而许多广域网的MTU不超过576字节。</p>
<p>当IP数据报的总长度大于链路MTU时，<br>就需要将IP数据报中的数据分装在两个或更多个较小的IP数据报中，<br>这些较小的数据报叫做片。</p>
<p><strong>分片偏移</strong></p>
<p>片段偏移字段以8字节块为单位进行测量。它是13位长，并指定特定相对于原始未分段的IP数据报的开始的片段的偏移量。零第一片段已偏移。这允许最多（2偏移13（次方）- 1）×8 &#x3D;字节65,528，这将超过65,535字节的最大IP报文长度与包括报头长度（+ 65,528 20 &#x3D; 65548字节）。</p>
<p>一般来说我们都知道MTU是1500字节，因此超过1500字节的数据就需要进行ip分片。<br>1、分片由IPv4头部中的标识(Identification)、分片偏移(Fragment offiet)和更多分片(More Fragments, MF)字段控制，分片的标识(Identification)都是同样的而且分片偏移(Fragment offiet)是以8字节为单位的偏移。<br>2、分片：源和目的端口号的UDP(协议)头部只出现在第一个分片里<br>3、<strong>重组</strong>：IP分片在目的地的网络层被重新组装。<br>目的主机使用IP首部中的标识、标志和片偏移字段来完成对片的重组。<br>同样的标识和不同的偏移让接收方可以对分片进行重组，<br>当MF &#x3D; 0的分片被接收到时,重组程序才能确定原始数据报的长度,</p>
<p><a href="#ipv6%E6%8A%A5%E5%A4%B4%E7%89%87%E5%AD%97%E6%AE%B5"><strong>标识(Identification)</strong></a><br>当创建一个 IP数据报时，源主机为该数据报加上一个<strong>标识号</strong>。<br>当一个路由器需要将一个数据报分片时，形成的每个数据报(即片)都具有相同的原始数据报的标识号。<br>当目的主机收到来自同一发送主机的一批数据报时，它可以通过检查数据报的标识号以确定哪些数据报是属于同一个原始数据报的片。</p>
<p><a href="#ipv6%E6%8A%A5%E5%A4%B4%E7%89%87%E5%AD%97%E6%AE%B5"><strong>更多分片(More Fragments, MF</strong>)</a><br>IP首部中的标志位有3个比特，但只有后2个比特有意义，分别是MF位和DF位(Don’t Fragment)，标志指明该数据报后面是否还有更多的分组。<br>只有当DF&#x3D;0时，该IP数据报才可以被分片。<br>MF则用来告知目的主机该IP数据报是否为原始数据报的最后一个片。<br>当MF&#x3D;1时，表示相应的原始数据报还有后续的片；<br>当MF&#x3D;0时，表示该数据报是相应原始数据报的最后-一个片。<br>目的主机在对片进行重组时，使用片偏移字段来确定片应放在原始IP数据报的哪个位置。</p>
<p><a href="#ipv6%E6%8A%A5%E5%A4%B4%E7%89%87%E5%AD%97%E6%AE%B5"><strong>分片偏移(Fragment offiet)</strong></a><br>偏移量是用来记录每个分片所在的位置，<br>偏移量&#x3D;相对分片报文长度&#x2F;8；<br>假设一共传输3800字节，mtu为1400字节，由于固定ip首部为20字节，<br>因此实际传输长度为1420字节，所以只需要传输三次，1400+1400+1000，<br>那么第一片偏移为0，第二片偏移&#x3D;1400&#x2F;8&#x3D;175，第三次偏移&#x3D;2800&#x2F;8&#x3D;350.</p>
<p>分片偏移量计算。<br>例：<br>考虑向一条具有1500字节的MTU的链路发送一个8000字节的数据报(首部20字节，数据部分7980字节)，<br>假定初始化数据报具有序列号321，这将会生成多少个片？它们的特征是什么？</p>
<p>答：<br>因为IP数据报首部占20字节，因此在每个分片中片的大小是1500-20&#x3D;1480个字节，<br>故原始数据报中7980字节数据必须被分配到7980&#x2F;1480&#x3D;6个片中。<br>所以7980字节数据必须被分配到6个独立的片中(每个片也是一一个IP数据报)。<br>由于偏移值的单位是8字节，所以除了最后一个片外，其他所有片中的有效数据载荷都是8的倍数。<br>每个片的标识号都为321.前5个片的MF&#x3D;1(还有分片)，最后一个片的MF&#x3D;0(表示最后一个分片)</p>
<p>ipv4的分片报文可参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44081384/article/details/126611347">https://blog.csdn.net/weixin_44081384/article/details/126611347</a></p>
<pre class="language-none"><code class="language-none">ping -s 3000 ipv6 2012::2 (指定数据包大小3000)							    #ipv6--控制包大小为3000</code></pre>

<h5 id="3-3-2-2-抓包分析"><a href="#3-3-2-2-抓包分析" class="headerlink" title="3.3.2.2 抓包分析"></a>3.3.2.2 抓包分析</h5><p>下对ipv6的报文进行分析</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123162413481.png" class="" title="image-20231123162413481">

<p>先发送两个没有icmp报头的ipv6包</p>
<p>其中包含data报头</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123162751230.png" class="" title="image-20231123162751230">

<p>这是第一个片</p>
<p>观察他的ipv6报头</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123162832880.png" class="" title="image-20231123162832880">

<p>可以看到他的next header字段是IPV6片的标识</p>
<p>关注Fragement Header for IPv6字段</p>
<p><a name="ipv6报头片字段"></a></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123162941425.png" class="" title="image-20231123162941425">

<p>可以看到偏移量Offset为0 </p>
<p>MORE Fragements为yes</p>
<p>Identification用于数据包重组</p>
<p>下图分别是第二个数据包和第三个ICMP数据包</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123165452282.png" class="" title="image-20231123165452282">

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123165520236.png" class="" title="image-20231123165520236">

<h3 id="3-4-常见上层协议及对应的Next-Header值"><a href="#3-4-常见上层协议及对应的Next-Header值" class="headerlink" title="3.4 常见上层协议及对应的Next Header值"></a>3.4 常见上层协议及对应的Next Header值</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112143130312.png" class="" title="image-20231112143130312">









<h3 id="3-5-IPv6-表示方式"><a href="#3-5-IPv6-表示方式" class="headerlink" title="3.5 IPv6 表示方式"></a>3.5 IPv6 表示方式</h3><p>ipv6地址共128位（b），128&#x2F;4&#x3D;32位（h）</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112143518094.png" class="" title="image-20231112143518094">

<p>若以16进制表示 </p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112143529766.png" class="" title="image-20231112143529766">

<h4 id="1、前导0可省略"><a href="#1、前导0可省略" class="headerlink" title="1、前导0可省略"></a>1、前导0可省略</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112143743201.png" class="" title="image-20231112143743201">

<h4 id="2、1个或多个0组成的地址块可用-取代"><a href="#2、1个或多个0组成的地址块可用-取代" class="headerlink" title="2、1个或多个0组成的地址块可用::取代"></a>2、1个或多个0组成的地址块可用::取代</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112144200218.png" class="" title="image-20231112144200218">

<p>注意：整个地址中，只能出现一次::</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231112144252674.png" class="" title="image-20231112144252674"></h2><h3 id="3-6-IPV6的单播组播广播"><a href="#3-6-IPV6的单播组播广播" class="headerlink" title="3.6 IPV6的单播组播广播"></a>3.6 IPV6的单播组播广播</h3><p>一般用64位做终端 因为后64位会根据mac地址去做填充</p>
<h4 id="3-6-1-IPV6地址结构"><a href="#3-6-1-IPV6地址结构" class="headerlink" title="3.6.1 IPV6地址结构"></a>3.6.1 IPV6地址结构</h4><p>IPv6的地址的结构为：网络前缀+接口ID，网络前缀:相当于IPv4中的网络位，接口ID:相当于IPv4 中的主机位。</p>
<p>IPv6中较常用的网络大小是64位前缀长度的网络。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123174552713.png" class="" title="image-20231123174552713">

<h4 id="3-6-2-IPV4的单播组播广播"><a href="#3-6-2-IPV4的单播组播广播" class="headerlink" title="3.6.2 IPV4的单播组播广播"></a>3.6.2 IPV4的单播组播广播</h4><p>IPV6与IPV4类似 也存在某一地址为单播 组播 等概念</p>
<p>在ipv4中</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123174219852.png" class="" title="image-20231123174219852">

<p>ABC类是单播地址，只有这三类地址才能分配给主 机接口使用。</p>
<p> D类属于组播地址</p>
<p>E类地址专门用于特殊的实验目的。</p>
<h4 id="3-6-3IPV6的单播"><a href="#3-6-3IPV6的单播" class="headerlink" title="3.6.3IPV6的单播"></a>3.6.3IPV6的单播</h4><p>IPv6单播地址表示<strong>唯一</strong>标识一个接口，类似于IPv4的单播地址。发送到单播地址的数据包将被 传输到此地址所标识的唯一接口，一个单播地址只能标识<strong>一个</strong>接口，但一个接口可以有<strong>多个</strong>单 播地址</p>
<p>单播地址可细分为以下几类：</p>
<ul>
<li>[链路本地地址 –link-local–fe80前缀](#3.6.3.1 链路本地地址–link-local)</li>
<li>[唯一本地地址](#3.6.3.2 唯一本地地址–组建私网使用	)</li>
<li>[全球单播地址](3.6.3.3 全球单播地址)</li>
<li>嵌入IPv4地址的IPv6地址</li>
</ul>
<h5 id="3-6-3-1-链路本地地址–link-local"><a href="#3-6-3-1-链路本地地址–link-local" class="headerlink" title="3.6.3.1 链路本地地址–link-local"></a>3.6.3.1 链路本地地址–link-local</h5><p>链路本地地址（Link-local）只在同一链路上的节点之间有效，在IPv6启动后就自动生成（无需ip地址）</p>
<p>使用 了<strong>特定的前缀FE80::&#x2F;10</strong>，接口ID使用EUI-64自动生成，也可以使用手动配置。 </p>
<p>例：使用EUI-64将MAC地址(48位)为A1-B2-C3-D4-E5-F6的主机的IPv6地址生成过程如下： </p>
<pre class="language-none"><code class="language-none">先将MAC地址拆分为2部分：【A1B2C3】、【D4E5F6】； 

在MAC地址的中间加上FFFE变成：【A1B2C3FFFED4E5F6】；

将第7位求反：【A3B2C3FFFED4E5F6】；

EUI-64计算得出的接口ID为：【A3B2:C3FF:FED4:E5F6】</code></pre>



<h5 id="3-6-3-2-唯一本地地址–组建私网使用"><a href="#3-6-3-2-唯一本地地址–组建私网使用" class="headerlink" title="3.6.3.2 唯一本地地址–组建私网使用"></a>3.6.3.2 唯一本地地址–组建私网使用</h5><p>唯一本地地址是IPv6网络中可以自己随意使用的私有网络地址，使用特定的前缀<strong>FD00&#x2F;8</strong>。 </p>
<p>◼ 固定前缀：8bit，FD00&#x2F;8。 </p>
<p>◼ Global ID：40bit，全球唯一前缀；通过伪随机方式产生。 </p>
<p>◼ Subnet ID：16bit，工程师根据网络规划自定义的子网ID。 </p>
<p>◼ Interface ID：64bit，相当于IPv4中的主机位。</p>
<h5 id="3-6-3-3-全球单播地址"><a href="#3-6-3-3-全球单播地址" class="headerlink" title="3.6.3.3 全球单播地址"></a>3.6.3.3 全球单播地址</h5><p>全球单播地址相当于IPv4中的公网地址，日前已经分配出去的前3位固定是001，所以已分配的 地址范围是2000::&#x2F;3。</p>
<p> ◼ 001：3bit，目前已分配的固定前缀为001。 </p>
<p>◼ TLA（Top Level Aggregation）顶级聚合：13bit。 </p>
<p>◼ RES:8bit，保留使用，为未来扩充TLA或者NLA预留。 </p>
<p>◼ NLA（Next Level Aggregation）次级聚合：24bit。 </p>
<p>◼ SLA（Site Level Aggregation）站点级聚合：16bit。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123175818983.png" class="" title="image-20231123175818983">

<h4 id="3-6-4-IPV4组播"><a href="#3-6-4-IPV4组播" class="headerlink" title="3.6.4 IPV4组播"></a>3.6.4 IPV4组播</h4><p>也称为多播multicast。组播是一种允许<strong>一个或多个</strong>发送者（组播源）发送<strong>单一的数据包到多个接收者</strong>（一次的，同时的）的网络技术。点到多点。</p>
<p>应用：譬如网络视频会议、网络音频&#x2F;视频广播、AOD&#x2F;VOD、股市行情发布、多媒体远程教育、CSCW协同计算、远程会诊、网络游戏。缓解带宽的急剧消耗和网络拥挤问题。</p>
<p>组播是基于UDP的。</p>
<h5 id="3-6-4-1-保留的永久组播地址"><a href="#3-6-4-1-保留的永久组播地址" class="headerlink" title="3.6.4.1 保留的永久组播地址"></a>3.6.4.1 保留的永久组播地址</h5><p>(属于局部链路组播地址范围）<br>224.0.0.1 所有主机<br>224.0.0.2 所有组播路由器<br>224.0.0.3 没有分配<br>224.0.0.5 OSPF路由器<br>224.0.0.6 OSPF 指定路由器(DR)<br>224.0.0.9 RIP2路由器<br>224.0.0.10 IGRP路由器<br>224.0.0.12 DHCP服务器&#x2F;中继代理<br>224.0.0.13 所有的PIM路由器 协议无关组播<br>224.0.0.18 VRRP</p>
<h5 id="3-6-4-2-用于在互联网上组播地址"><a href="#3-6-4-2-用于在互联网上组播地址" class="headerlink" title="3.6.4.2 用于在互联网上组播地址"></a>3.6.4.2 用于在互联网上组播地址</h5><p>（包含在用户组播地址范围内）<br>实际的可用于在互联网上组播地址是225.0.0.0&#x2F;8 - 238.0.0.0&#x2F;8，这个组播地址不属于任何服务器或个人，它有点类似一个微信群号，任何成员（组播源）往微信群（组播IP）发送消息（组播数据），这个群里的成员（组播接收者）都会接收到此消息。</p>
<p>运营商使用的组播地址，233.0.0.0-233.255.255.255，是一种自治系统之间的组播地址分配机制，将 AS 号直接填入组播地址的中间两个字节中，每个自治系统都可以得到 255 个组播地址。</p>
<h4 id="3-6-5-IPV6组播"><a href="#3-6-5-IPV6组播" class="headerlink" title="3.6.5 IPV6组播"></a>3.6.5 IPV6组播</h4><p>在IPv6中不存在广播报文，要通过组播来实现，广播本身就是组播的一种应用。</p>
<p>组播地址标识 一组接口，目的地址是组播地址的数据包会被属于该组的所有接口所接收。 </p>
<p>◼ FF：8bit，IPv6组播地址前8位都是FF&#x2F;8，以FF::&#x2F;8开头。 </p>
<p>◼ Left time：4bit，第1位都是0，格式|0|r|p|t|。</p>
<p> ◼ Scope：4bit，标识传播范围。 </p>
<p>◼ Group ID：112bit，组播组标识号。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123210218964.png" class="" title="image-20231123210218964">

<h5 id="3-6-5-1-IPV6固定组播地址"><a href="#3-6-5-1-IPV6固定组播地址" class="headerlink" title="3.6.5.1 IPV6固定组播地址"></a>3.6.5.1 IPV6固定组播地址</h5><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123210231603.png" class="" title="image-20231123210231603">

<h5 id="3-6-5-2-特殊地址"><a href="#3-6-5-2-特殊地址" class="headerlink" title="3.6.5.2 特殊地址"></a>3.6.5.2 特殊地址</h5><p> 0:0:0:0:0:0:0:0（简化为::）未指定地址: </p>
<p>◼ 它不能分配给任何节点，表示当前状态下没有地址，如当设备刚接入网络后，本身没有地址，则发送 数据包的源地址使用该地址，比如发送RA消息，DAD（重复地址检测）。该地址不能用作目的地址。</p>
<p>0:0:0:0:0:0:0:1（简化为::1）环回地址:</p>
<p> ◼ 节点用它作为发送后返回给自己的IPv6报文，不能分配给任何物理接口</p>
<p>相比IPV4的环回口地址（直接分配127一个地址段） IPV6的环回口较为节省</p>
<h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h4 id="3-6-6-IPV6任播"><a href="#3-6-6-IPV6任播" class="headerlink" title="3.6.6 IPV6任播"></a>3.6.6 IPV6任播</h4><p>IPv6任播地址 </p>
<p> 任播的概念最初是在RFC1546（Host Anycasting Service）中提出并定义的，主要为DNS和HTTP提 供服务。 </p>
<p> IPv6中没有为任播规定单独的地址空间，任播地址和单播地址使用相同的地址空间。 </p>
<p> IPv6任播地址可以同时被分配给多个设备，也就是说多台设备可以有相同的任播地址。</p>
<p>以任播 地址为目标的数据包会通过路由器的路由表被路由到<strong>离源设备最近的拥有该目标地址</strong>的设备。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123211109571.png" class="" title="image-20231123211109571">

<p>若路由收到用户发来的任播数据包 则会走服务器C</p>
<h2 id="4-IPV6路由基础"><a href="#4-IPV6路由基础" class="headerlink" title="4.IPV6路由基础"></a>4.IPV6路由基础</h2><p>实验拓扑</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123214927489.png" class="" title="image-20231123214927489">

<h3 id="4-1-1-IPV6静态路由配置"><a href="#4-1-1-IPV6静态路由配置" class="headerlink" title="4.1.1 IPV6静态路由配置"></a>4.1.1 IPV6静态路由配置</h3><pre class="language-none"><code class="language-none">[R1]ipv6 route-static 2022:: 64 2012::2</code></pre>

<h3 id="4-1-2-路由协议配置"><a href="#4-1-2-路由协议配置" class="headerlink" title="4.1.2 路由协议配置"></a>4.1.2 路由协议配置</h3><p>注意，无论OSPF还是RIP，在IPV6中，已经没有network命令，无法通过宣告网段的方式来让下一路由学习</p>
<p>需进入所需配置的接口进行划分</p>
<h4 id="4-1-2-1-OSPF协议配置–OSPFv3"><a href="#4-1-2-1-OSPF协议配置–OSPFv3" class="headerlink" title="4.1.2.1 OSPF协议配置–OSPFv3"></a>4.1.2.1 OSPF协议配置–OSPFv3</h4><p>值得关注的是 ipv6中OSPF的router-id仍使用ipv4地址</p>
<p><strong>在OSPF中的router id选举规则如下：</strong></p>
<p><strong>1、优选手工配置的router id；</strong></p>
<p>①OSPF进程手工配置的router id具有最高优先级</p>
<p>②在全局模式下配置的公用router id的优先级仅次于直接给OSPF进程手工配置router id，即它具有第二优先级</p>
<p><strong>2、在没有手工配置的前提下</strong>，优选loopback接口地址中最大的地址作为router id；</p>
<p><strong>3、在没有配置loopback接口地址的前提下</strong>，优选其他接口的IP地址中选择最大的地址作为router id (不考虑接口的Up&#x2F;Down状态)。</p>
<pre class="language-none"><code class="language-none">[R2]ospfv3
[R2-ospfv3-1]area 0
[R2-ospfv3-1-area-0.0.0.0]q
[R2-ospfv3-1]q
[R2]interf 
[R2]interface g0&#x2F;0&#x2F;0
[R2-GigabitEthernet0&#x2F;0&#x2F;0]ospfv3 ?   
  INTEGER&lt;1-65535&gt;  Process ID
  cost              Set OSPFv3 interface cost
  dr-priority       Router priority
  mtu-ignore        Ignore checking MTU on DD packets
  network-type      OSPFv3 network type
  peer              Static neighbor configuration for NBMA and P2MP-Nonbroadcast
                    network types
  timer             Specify timer interval
  trans-delay       Link state transmit delay
[R2-GigabitEthernet0&#x2F;0&#x2F;0]ospfv3 1 area 0</code></pre>

<p>因此在上述配置做完后 会发现邻居关系无法建立</p>
<pre class="language-none"><code class="language-none">[R2-ospfv3-1]router-id ?
  IP_ADDR&lt;X.X.X.X&gt;  OSPFv3 Private router ID value</code></pre>

<p>熟悉的样子 仍然是得配置IPV4啊！</p>
<pre class="language-none"><code class="language-none">[R2-ospfv3-1]router-id 2.2.2.2</code></pre>

<p>在R1上做同样的配置</p>
<p>需要注意 如果环回口的ipv4地址是在ospf开启后配置的 则依然无法启动</p>
<p>经过测试 不配置routerid就无法发送hello报文 </p>
<p>邻居建立过程与ipv4相同</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123220232806.png" class="" title="image-20231123220232806">

<p>每隔10s发送hello报文 然后发送DB比大小 </p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231123220336936.png" class="" title="image-20231123220336936">

<pre class="language-none"><code class="language-none">[R2]display ospfv3 peer
OSPFv3 Process (1)
OSPFv3 Area (0.0.0.0)
Neighbor ID     Pri  State            Dead Time Interface            Instance ID
1.1.1.1           1  Full&#x2F;Backup      00:00:34  GE0&#x2F;0&#x2F;0                        0</code></pre>

<p>邻居关系已建立</p>
<p>ipv6 ddns</p>
<p>dhcpv6 报文 shutdown undo shutdown</p>
<p>RA&#x2F;</p>
<h4 id="4-1-2-2-RIP协议配置–RIPNG"><a href="#4-1-2-2-RIP协议配置–RIPNG" class="headerlink" title="4.1.2.2 RIP协议配置–RIPNG"></a>4.1.2.2 RIP协议配置–RIPNG</h4><pre class="language-none"><code class="language-none">[R2]ripng</code></pre>

<h3 id="4-1-3-IPV6-地址自动配置"><a href="#4-1-3-IPV6-地址自动配置" class="headerlink" title="4.1.3 IPV6 地址自动配置"></a>4.1.3 IPV6 地址自动配置</h3><p>实验拓扑</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231124085730787.png" class="" title="image-20231124085730787">

<h4 id="4-1-3-1-无状态自动配置"><a href="#4-1-3-1-无状态自动配置" class="headerlink" title="4.1.3.1 无状态自动配置"></a>4.1.3.1 无状态自动配置</h4><p>1.在R1和R2上使能ipv6 并让接口自动生成[链路本地地址](#3.6.3.1 链路本地地址–link-local)</p>
<pre class="language-none"><code class="language-none">[R1]ipv6
[R1]inter g0&#x2F;0&#x2F;0
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 address auto ?
  dhcp        Address assigned via DHCPv6
  global      Use global address
  link-local  Use link-local address
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 address auto link-local 
[R1-GigabitEthernet0&#x2F;0&#x2F;0]display ipv6 interface brief
*down: administratively down
(l): loopback
(s): spoofing
Interface                    Physical              Protocol   
GigabitEthernet0&#x2F;0&#x2F;0         up                    up         
[IPv6 Address] FE80::2E0:FCFF:FE2D:5AC	</code></pre>

<p>此时去通信（ping为例） 需要指定端口</p>
<pre class="language-none"><code class="language-none">ping ipv6 FE80::2E0:FCFF:FE2D:5AC -i GigabitEthernet 0&#x2F;0&#x2F;0</code></pre>

<p>不然会报错：</p>
<pre class="language-none"><code class="language-none">[R2-GigabitEthernet0&#x2F;0&#x2F;0]ping ipv6 FE80::2E0:FCFF:FE2D:5AC
Error: Please specify an interface name for the link-local address.</code></pre>

<p>2、在R2的接口上配置IPV6全球单播地址</p>
<pre class="language-none"><code class="language-none">[R2]interface g0&#x2F;0&#x2F;0
[R2-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 add 2001::2 64
[R2-GigabitEthernet0&#x2F;0&#x2F;0]display ipv6 interface brief
*down: administratively down
(l): loopback
(s): spoofing
Interface                    Physical              Protocol   
GigabitEthernet0&#x2F;0&#x2F;0         up                    up         
[IPv6 Address] 2001::2</code></pre>

<p>3、在R2使能发布RA报文的功能</p>
<p>逻辑上应该是undo抑制功能</p>
<pre class="language-none"><code class="language-none">[R2-GigabitEthernet0&#x2F;0&#x2F;0]undo ipv6 nd ra halt</code></pre>

<p>4、配置R1 g0&#x2F;0&#x2F;0接口自动获取ip地址</p>
<pre class="language-none"><code class="language-none">[R1]inter g0&#x2F;0&#x2F;0
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ipv6 add auto global</code></pre>

<p>5、检查R1的ip</p>
<pre class="language-none"><code class="language-none">[R1]display ipv6 interface brief 
*down: administratively down
(l): loopback
(s): spoofing
Interface                    Physical              Protocol   
GigabitEthernet0&#x2F;0&#x2F;0         up                    up         
[IPv6 Address] 2001::2E0:FCFF:FE2D:5AC</code></pre>

<p>可以看到</p>
<p>R1已经学习到了R2的ip</p>
<p>拥有与R2一样的64位前缀2001::&#x2F;64</p>
<p>接口id结合其mac地址 生成方式参照[EUI-64](#3.6.3.1 链路本地地址–link-local)标准</p>
<h4 id="4-1-3-2-ICMPv6报文-未完结"><a href="#4-1-3-2-ICMPv6报文-未完结" class="headerlink" title="4.1.3.2 ICMPv6报文(未完结)"></a>4.1.3.2 ICMPv6报文(未完结)</h4><p>由于时间原因 该部分没有做详细介绍 </p>
<p>后续可参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32044265/article/details/126402242">https://blog.csdn.net/qq_32044265/article/details/126402242</a></p>
<p>实则是icmpv6报文</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2023/11/04/ipv6/image-20231124092754116.png" class="" title="image-20231124092754116">

<h4 id="4-1-3-3-DHCP配置"><a href="#4-1-3-3-DHCP配置" class="headerlink" title="4.1.3.3 DHCP配置"></a>4.1.3.3 DHCP配置</h4><h2 id="4-ADD"><a href="#4-ADD" class="headerlink" title="4.ADD"></a>4.ADD</h2><h3 id="4-1-单接口下配置多个ip"><a href="#4-1-单接口下配置多个ip" class="headerlink" title="4.1 单接口下配置多个ip"></a>4.1 单接口下配置多个ip</h3><pre class="language-none"><code class="language-none">[R1]inter g0&#x2F;0&#x2F;0
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ip add 192.168.1.1
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ip add 192.168.1.2 sub
[R1-GigabitEthernet0&#x2F;0&#x2F;0]ip add 192.168.1.3 sub
...</code></pre>

</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/tx.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/tx.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">ryz</div><div class="post-copyright__author_desc">生活就是白云苍狗</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://ybjryz.github.io/2023/11/04/ipv6/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://ybjryz.github.io/2023/11/04/ipv6/')">ryz</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://ybjryz.github.io/2023/11/04/ipv6/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ryz&amp;url=http://ybjryz.github.io/2023/11/04/ipv6/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://ybjryz.github.io" target="_blank">ryz</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/ICT/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>ICT<span class="tagsPageCount">10</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/tx.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/04/%E7%BA%A2%E5%B2%A9%E6%9D%AF/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">红岩杯</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/05/LAMP/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">LAMP</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2023/11/18/BGP/" title="BGP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-18</div><div class="title">BGP</div></div></a></div><div><a href="/2023/11/01/NAT/" title="NAT"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-01</div><div class="title">NAT</div></div></a></div><div><a href="/2023/11/02/PPP/" title="PPP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-02</div><div class="title">PPP</div></div></a></div><div><a href="/2023/11/08/ip%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" title="ip基本概念"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-08</div><div class="title">ip基本概念</div></div></a></div><div><a href="/2023/11/09/%E5%8D%8E%E4%B8%BAensp%E5%91%BD%E4%BB%A4%E9%85%8D%E7%BD%AE/" title="ensp命令与部分知识点总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-09</div><div class="title">ensp命令与部分知识点总结</div></div></a></div><div><a href="/2023/11/07/%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1/" title="路由策略"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-07</div><div class="title">路由策略</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/tx.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IPV6"><span class="toc-number">1.</span> <span class="toc-text">IPV6</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ipv6%E5%BC%95%E5%85%A5"><span class="toc-number">1.1.</span> <span class="toc-text">1.ipv6引入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-ipv4-%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 ipv4 局限性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-ipv6%E3%81%AE%E5%B4%9B%E8%B5%B7"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 ipv6の崛起</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E9%97%A8%E7%A6%81%E9%94%81%E8%BF%9Ewifi"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 门禁锁连wifi</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-IPv6%E4%B8%8EIPv4%E5%AF%B9%E6%AF%94"><span class="toc-number">1.2.</span> <span class="toc-text">2.IPv6与IPv4对比</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-IPv6%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%B0%81%E8%A3%85"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 IPv6数据报封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-IPv6%E5%9F%BA%E7%A1%80%EF%BC%81"><span class="toc-number">1.3.</span> <span class="toc-text">3.IPv6基础！</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-IPV6%E6%95%B0%E6%8D%AE%E5%8C%85%E5%B0%81%E8%A3%85"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 IPV6数据包封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%AE%9E%E9%AA%8C%E2%80%93ping%E8%A7%82%E5%AF%9Fipv6%E6%8A%A5%E5%A4%B4"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 实验–ping观察ipv6报头</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E9%85%8D%E7%BD%AE%E6%8E%A5%E5%8F%A3ip"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">3.2.1 配置接口ip</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-ping%E8%A7%82%E5%AF%9F%E6%8A%A5%E5%A4%B4"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 ping观察报头</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-ping%E5%9F%BA%E7%A1%80%E5%8C%85"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">3.3.1 ping基础包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E5%88%86%E7%89%87"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">3.3.2 分片</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-1-%E5%88%86%E7%89%87%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.3.2.1.</span> <span class="toc-text">3.3.2.1 分片的基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-2-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90"><span class="toc-number">1.3.3.2.2.</span> <span class="toc-text">3.3.2.2 抓包分析</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%B8%B8%E8%A7%81%E4%B8%8A%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8F%8A%E5%AF%B9%E5%BA%94%E7%9A%84Next-Header%E5%80%BC"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 常见上层协议及对应的Next Header值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-IPv6-%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 IPv6 表示方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%89%8D%E5%AF%BC0%E5%8F%AF%E7%9C%81%E7%95%A5"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">1、前导0可省略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%811%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA0%E7%BB%84%E6%88%90%E7%9A%84%E5%9C%B0%E5%9D%80%E5%9D%97%E5%8F%AF%E7%94%A8-%E5%8F%96%E4%BB%A3"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">2、1个或多个0组成的地址块可用::取代</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-IPV6%E7%9A%84%E5%8D%95%E6%92%AD%E7%BB%84%E6%92%AD%E5%B9%BF%E6%92%AD"><span class="toc-number">1.4.1.</span> <span class="toc-text">3.6 IPV6的单播组播广播</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1-IPV6%E5%9C%B0%E5%9D%80%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">3.6.1 IPV6地址结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-2-IPV4%E7%9A%84%E5%8D%95%E6%92%AD%E7%BB%84%E6%92%AD%E5%B9%BF%E6%92%AD"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">3.6.2 IPV4的单播组播广播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-3IPV6%E7%9A%84%E5%8D%95%E6%92%AD"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">3.6.3IPV6的单播</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-3-1-%E9%93%BE%E8%B7%AF%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80%E2%80%93link-local"><span class="toc-number">1.4.1.3.1.</span> <span class="toc-text">3.6.3.1 链路本地地址–link-local</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-3-2-%E5%94%AF%E4%B8%80%E6%9C%AC%E5%9C%B0%E5%9C%B0%E5%9D%80%E2%80%93%E7%BB%84%E5%BB%BA%E7%A7%81%E7%BD%91%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.1.3.2.</span> <span class="toc-text">3.6.3.2 唯一本地地址–组建私网使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-3-3-%E5%85%A8%E7%90%83%E5%8D%95%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.1.3.3.</span> <span class="toc-text">3.6.3.3 全球单播地址</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-4-IPV4%E7%BB%84%E6%92%AD"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">3.6.4 IPV4组播</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-4-1-%E4%BF%9D%E7%95%99%E7%9A%84%E6%B0%B8%E4%B9%85%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.1.4.1.</span> <span class="toc-text">3.6.4.1 保留的永久组播地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-4-2-%E7%94%A8%E4%BA%8E%E5%9C%A8%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.1.4.2.</span> <span class="toc-text">3.6.4.2 用于在互联网上组播地址</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-5-IPV6%E7%BB%84%E6%92%AD"><span class="toc-number">1.4.1.5.</span> <span class="toc-text">3.6.5 IPV6组播</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-5-1-IPV6%E5%9B%BA%E5%AE%9A%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.1.5.1.</span> <span class="toc-text">3.6.5.1 IPV6固定组播地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-5-2-%E7%89%B9%E6%AE%8A%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.1.5.2.</span> <span class="toc-text">3.6.5.2 特殊地址</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">1.4.2.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-6-IPV6%E4%BB%BB%E6%92%AD"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">3.6.6 IPV6任播</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-IPV6%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80"><span class="toc-number">1.5.</span> <span class="toc-text">4.IPV6路由基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-IPV6%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">4.1.1 IPV6静态路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">4.1.2 路由协议配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2-1-OSPF%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE%E2%80%93OSPFv3"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">4.1.2.1 OSPF协议配置–OSPFv3</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2-2-RIP%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE%E2%80%93RIPNG"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">4.1.2.2 RIP协议配置–RIPNG</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-IPV6-%E5%9C%B0%E5%9D%80%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.3.</span> <span class="toc-text">4.1.3 IPV6 地址自动配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-1-%E6%97%A0%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">4.1.3.1 无状态自动配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-2-ICMPv6%E6%8A%A5%E6%96%87-%E6%9C%AA%E5%AE%8C%E7%BB%93"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">4.1.3.2 ICMPv6报文(未完结)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-3-DHCP%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">4.1.3.3 DHCP配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ADD"><span class="toc-number">1.6.</span> <span class="toc-text">4.ADD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%8D%95%E6%8E%A5%E5%8F%A3%E4%B8%8B%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAip"><span class="toc-number">1.6.1.</span> <span class="toc-text">4.1 单接口下配置多个ip</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/25/web%E6%BC%8F%E6%B4%9E%E5%AE%9E%E9%AA%8C6/" title="web漏洞实验6">web漏洞实验6</a><time datetime="2023-11-25T06:31:18.000Z" title="发表于 2023-11-25 14:31:18">2023-11-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/25/web%E6%BC%8F%E6%B4%9E%E5%AE%9E%E9%AA%8C7/" title="web漏洞实验6">web漏洞实验6</a><time datetime="2023-11-25T06:31:18.000Z" title="发表于 2023-11-25 14:31:18">2023-11-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/23/%E8%84%9A%E6%9C%AC/" title="无题">无题</a><time datetime="2023-11-23T10:29:48.689Z" title="发表于 2023-11-23 18:29:48">2023-11-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/23/%E8%B5%84%E6%BA%90/" title="资源">资源</a><time datetime="2023-11-23T06:31:18.000Z" title="发表于 2023-11-23 14:31:18">2023-11-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/22/%E4%BB%A3%E5%8A%9E/" title="无题">无题</a><time datetime="2023-11-21T19:24:51.935Z" title="发表于 2023-11-22 03:24:51">2023-11-22</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="ryz" target="_blank">ryz</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">49</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/ICT/" style="font-size: 0.88rem;">ICT<sup>10</sup></a><a href="/tags/SQL/" style="font-size: 0.88rem;">SQL<sup>1</sup></a><a href="/tags/SQL-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 0.88rem;">SQL,环境搭建<sup>1</sup></a><a href="/tags/WEB-SQL/" style="font-size: 0.88rem;">WEB-SQL<sup>2</sup></a><a href="/tags/WEB-Trojans/" style="font-size: 0.88rem;">WEB-Trojans<sup>1</sup></a><a href="/tags/code/" style="font-size: 0.88rem;">code<sup>1</sup></a><a href="/tags/ctf/" style="font-size: 0.88rem;">ctf<sup>2</sup></a><a href="/tags/password/" style="font-size: 0.88rem;">password<sup>1</sup></a><a href="/tags/tools/" style="font-size: 0.88rem;">tools<sup>1</sup></a><a href="/tags/web/" style="font-size: 0.88rem;">web<sup>1</sup></a><a href="/tags/web-tools/" style="font-size: 0.88rem;">web-tools<sup>2</sup></a><a href="/tags/web-%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">web-基础<sup>1</sup></a><a href="/tags/web%E6%BC%8F%E6%B4%9E/" style="font-size: 0.88rem;">web漏洞<sup>5</sup></a><a href="/tags/web%E6%BC%8F%E6%B4%9E-%E4%BB%BB%E6%84%8F%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" style="font-size: 0.88rem;">web漏洞--任意命令执行<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96/" style="font-size: 0.88rem;">博客优化<sup>3</sup></a><a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 0.88rem;">建站<sup>1</sup></a><a href="/tags/%E6%9D%82%E9%A1%B9/" style="font-size: 0.88rem;">杂项<sup>1</sup></a><a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" style="font-size: 0.88rem;">渗透测试<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 0.88rem;">环境搭建<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8779107562" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist?id=8779107562&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("05/14/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.8",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 ryz 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>